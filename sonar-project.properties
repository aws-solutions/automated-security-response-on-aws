#
# Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
# SPDX-License-Identifier: Apache-2.0
#

# scan templates in cdk.out even though they are in .gitignore
sonar.scm.exclusions.disabled = true

sonar.sources = source/,simtest/

sonar.exclusions = \
    **/test/**/*, \
    **/__tests__/**/*, \
    test-stack/**/*, \
    **/jest.config.*, \
    source/**/*.test.ts, \
    **/coverage/**/*, \
    source/**/cdk.out/*, \
    source/pre_processor/coverage/**/*, \
    deployment/utils/coverage/**/*, \
    source/webui/src/__tests__/**, \
    source/webui/src/public/*, \
    source/data-models/cjs/**, \
    source/data-models/esm/**

sonar.tests = \
    source/layer/test/,  \
    source/Orchestrator/test/, \
    source/playbooks/AFSBP/test/, \
    source/playbooks/AFSBP/ssmdocs/scripts/test/, \
    source/playbooks/CIS120/test/, \
    source/playbooks/CIS140/test/, \
    source/playbooks/common/test/, \
    source/playbooks/NEWPLAYBOOK/test/, \
    source/playbooks/NIST80053/test/, \
    source/playbooks/PCI321/test/, \
    source/playbooks/PCI321/ssmdocs/scripts/test/, \
    source/playbooks/SC/test/, \
    source/remediation_runbooks/scripts/test/, \
    source/solution_deploy/source/test/, \
    source/test/, \
    source/lambdas/pre-processor/__tests__/, \
    source/lambdas/api/__tests__/, \
    source/lambdas/common/__tests__/, \
    deployment/utils/, \
    source/webui/src/__tests__/
sonar.coverage.exclusions=\
    simtest/**/*, \
    source/webui/public/mockServiceWorker.js, \
    source/webui/src/mocks/**, \
    source/webui/src/main.tsx, \
    source/webui/src/setupTests.ts, \
     **/repositories/abstractRepository.ts
sonar.python.version = 3.11
sonar.python.coverage.reportPaths = deployment/test/coverage-reports/*.coverage.xml

sonar.javascript.lcov.reportPaths = \
    source/coverage/lcov.info, \
    source/webui/coverage/lcov.info, \
    source/lambdas/api/coverage/lcov.info, \
    source/lambdas/common/coverage/lcov.info, \
    source/lambdas/pre-processor/coverage/lcov.info, \
    source/lambdas/synchronization/coverage/lcov.info

sonar.cpd.exclusions= \
    source/lib/administrator-stack.ts, \
    source/playbooks/**/lib/*_remediations.ts, \
    source/playbooks/**/lib/*construct.ts, \
    source/playbooks/**/ssmdocs/**, \
    source/lib/*-stack.ts

sonar.issue.ignore.multicriteria = ts1
sonar.issue.ignore.multicriteria.ts1.ruleKey = typescript:S1848
sonar.issue.ignore.multicriteria.ts1.resourceKey = **/*.ts
